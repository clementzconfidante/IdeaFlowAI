function convert() {
    const text = document.getElementById('inputText').value;
    const type = document.getElementById('conversionType').value;
    const status = document.getElementById('status');
    status.textContent = 'Processing...';

    if (!text) {
        status.textContent = 'Please enter some text!';
        return;
    }

    if (type === 'pdf') {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const lines = doc.splitTextToSize(text, 180); // Wrap text to fit page
        doc.text(lines, 10, 10);
        doc.save('output.pdf');
        status.textContent = 'PDF downloaded!';
    } 
    else if (type === 'audio') {
        if (!window.speechSynthesis) {
            status.textContent = 'Text-to-speech not supported in your browser';
            return;
        }

        // Cancel any ongoing speech
        window.speechSynthesis.cancel();

        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = "en-US";
        utterance.rate = 1;
        utterance.pitch = 1;
        
        utterance.onend = function() {
            status.textContent = 'Audio playback completed!';
        };
        
        utterance.onerror = function() {
            status.textContent = 'Error playing audio';
        };
        
        window.speechSynthesis.speak(utterance);
        status.textContent = 'Speaking your text now...';
    }
    else {
        status.textContent = 'Feature coming soon! Try PDF or Audio for now.';
    }
}
